<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="путь к CSS файлу"> -->
    <!-- </linkrel> -->
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
            color: var(--tg-theme-text-color);
            /* color */
            background: var(--tg-theme-bg-color);
        }

        .cr {
            color: var(--tg-theme-link-color);
        }

        .img_centr {
            text-align: center; 
            margin: 30px 10px 10px 10px;
        }

        .main_text_align_justify {
            text-align: justify;
            margin: 10px 10px 30px 10px; 
        }

        .form_input_align_center {
            /* display: none; */
            text-align: center;
            margin: 10px 10px 30px 10px; 

        }

        .form_data_align_center {
            display: none;
            text-align: center;
            margin: 10px 10px 30px 10px; 

        }

        .btn_centr {
            text-align: center; 
            margin-top: 10px; margin-bottom: 10px;
            border-radius: 50px; 
        }

        .inputbr {
            text-align: center; 
            /* colo: var(--tg-theme-button-text-color); */
            /* background: var(--tg-theme-button-color); */
            /* background: var(--tg-theme-button-color); */
            /* color-scheme: var(--tg-theme-button-color); */
        }

        .feedback_input {
            display: block;
            height: 25px;
            width: 180px;
            margin: 5px auto 1px;
            border: 1px solid black;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            -khtml-border-radius: 10px;
            border-radius: 10px;
            text-indent: 10px;
        }

        .button {
            border: 1;
            border-radius: 10px;
            margin-top: 50px;
            height: 60px;
            width: 200px;
            font-size: 20;
            font-weight: 500;
            cursor: pointer;
            transition: all 500ms ease;
            /* color: var(--tg-theme-button-color); */
            background: var(--tg-theme-button-text-color);
            /* color: var(--tg-theme-button-text-color); */
            /* background: var(--tg-theme-button-color); */
            text-align: center; 
        }

        .button1 {
            border: 1;
            border-radius: 10px;
            margin-top: 50px;
            height: 60px;
            width: 200px;
            font-size: 20;
            font-weight: 500;
            cursor: pointer;
            transition: all 500ms ease;
            /* color: var(--tg-theme-button-color); */
            /* background: var(--tg-theme-button-text-color); */
            /* color: var(--tg-theme-button-text-color); */
            /* background: var(--tg-theme-button-color); */
            text-align: center; 
        }

        button.hover {
            background: var(--tg-theme-secondary-bg-color);
        }
       </style>
</head>
<body>
    <div id="flag">
        <p class="img_centr"><img src=kz.png width="100%"
            style="border: 1px solid black; border-radius: 10px;"></p>
    </div>
    <div id="main" class="main_text_align_justify">
        <p>К заказу доступны новые автомобили.</p>
        <p>Выберите интересующий вас автомобиль,
            например на сайте официального дилера KIA
            в Казахстане <b><a href="https://www.kia.com.kz" style="color: var(--tg-theme-link-color); ">www.kia.com.kz</a></b>,
            и посмотрите его стоимость. Заполните необходимые
            поля для расчета и нажмите кнопку "Произвести расчет".</p>
    </div>

    <div id="calc" class="form_input_align_center">
        <input class="button1" type='number' placeholder="Стоимость в тенге" id="price" onkeypress='validate(event)'/>
        <p><input class="button1" type="number" placeholder="Объём двигателя" id="volume" onkeypress='validate(event)'></p>
        <p><button id="id_calc" class="button">Произвести расчёт</button></p>
        <!-- <p><button id="id_calc">Произвести расчёт</button></p> -->
    </div>

    <div id="error" class="form_data_align_center">
        <p>Введите корректные данные!</p>
        <button id="id_exit">Закрыть</button>
    </div>
    

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let btn_calc = document.getElementById('id_calc');
        let btn_exit = document.getElementById('id_exit');

        function validate(evt) {
            var theEvent = evt || window.event;
            var key = theEvent.keyCode || theEvent.which;
            key = String.fromCharCode( key );
            var regex = /[0-9]/;
            if( !regex.test(key) ) {
                theEvent.returnValue = false;
                if(theEvent.preventDefault) theEvent.preventDefault();
            }
        }

        function fun_calc_data() {
            let price_ = document.getElementById("price").value;
            let volume_ = document.getElementById("volume").value;
            console.log(price_);
            console.log(volume_);
            if (price_ == 0 || volume_ == 0) {
                document.getElementById("calc").style.display = "none";
                document.getElementById("error").style.display = "block";
            }
            else {
                tg.close();
            }
        }
        btn_calc.addEventListener('click', fun_calc_data);

        function fun_exit() {
            document.getElementById("price").value = "";
            document.getElementById("volume").value = "";
            document.getElementById("calc").style.display = "block";
            document.getElementById("error").style.display = "none";
        }
        btn_exit.addEventListener('click', fun_exit);

    </script>
</body>
</html>
